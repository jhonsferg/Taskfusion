{% extends "base.html" %}

{% block title %}Dashboard Analytics - TaskFusion{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard__header">
        <div class="dashboard__header-content">
            <h1 class="dashboard__title">
                <i class="fas fa-chart-line dashboard__title-icon"></i>
                Dashboard Analytics
            </h1>
            <div class="dashboard__actions">
                <button class="btn btn--secondary" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i>
                    Actualizar
                </button>
            </div>
        </div>
        <div class="dashboard__timestamp">
            <i class="fas fa-clock"></i>
            <span id="lastUpdate">Cargando...</span>
        </div>
    </div>

    <div class="metrics">
        <div class="metric-card metric-card--primary">
            <div class="metric-card__icon">
                <i class="fas fa-tasks"></i>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="totalTasks">0</div>
                <div class="metric-card__label">Total Tareas</div>
            </div>
        </div>

        <div class="metric-card metric-card--info">
            <div class="metric-card__icon">
                <i class="fas fa-inbox"></i>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="backlogTasks">0</div>
                <div class="metric-card__label">En Backlog</div>
            </div>
        </div>

        <div class="metric-card metric-card--warning">
            <div class="metric-card__icon">
                <i class="fas fa-spinner"></i>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="inProgressTasks">0</div>
                <div class="metric-card__label">En Progreso</div>
            </div>
        </div>

        <div class="metric-card metric-card--success">
            <div class="metric-card__icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="metric-card__content">
                <div class="metric-card__value" id="doneTasks">0</div>
                <div class="metric-card__label">Completadas</div>
            </div>
        </div>
    </div>

    <div class="alert-card" id="overdueAlert">
        <div class="alert-card__icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="alert-card__content">
            <div class="alert-card__title">Tareas Vencidas</div>
            <div class="alert-card__value" id="overdueTasks">0</div>
            <div class="alert-card__progress">
                <div class="progress-bar" id="overdueProgress"></div>
            </div>
        </div>
    </div>

    <div class="charts">
        <div class="chart-card">
            <div class="chart-card__header">
                <h3 class="chart-card__title">
                    <i class="fas fa-chart-pie"></i>
                    Distribuci√≥n por Estado
                </h3>
            </div>
            <div class="chart-card__body">
                <canvas id="statusChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-card__header">
                <h3 class="chart-card__title">
                    <i class="fas fa-chart-bar"></i>
                    Tareas por Proyecto
                </h3>
            </div>
            <div class="chart-card__body">
                <canvas id="projectChart"></canvas>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', path='/js/dashboard.js') }}"></script>
{% endblock %}
